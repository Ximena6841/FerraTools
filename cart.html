<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Carrito de Compras - FerraTools</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Ferreteria " name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">  

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    
    <!-- CSS Adicional -->
    <style>
        .card {
            transition: all 0.3s;
            border: 1px solid #eee;
        }
        .card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .price-section del {
            font-size: 0.9rem;
        }
        .price-section h4 {
            margin: 5px 0;
        }
        .badge-primary {
            background-color: #007bff;
        }
        .stock-info {
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        .quantity-selector .input-group {
            margin: 10px 0;
        }
        .btn-plus, .btn-minus {
            width: 40px;
        }
        #cart-counter {
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 10px;
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .product-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
        }
        .empty-cart {
            text-align: center;
            padding: 50px 0;
        }
        .empty-cart i {
            font-size: 5rem;
            color: #ddd;
            margin-bottom: 20px;
        }
    </style>
</head>
<body> 
    <!-- Topbar Start -->
    <div class="container-fluid bg-dark text-white py-2 px-xl-5">
        <div class="row align-items-center">
            <div class="col-lg-4 text-center text-lg-right">
                <div class="d-inline-flex align-items-center">

                    <!-- Selector de moneda -->
                    <div class="btn-group mr-2">
                        <button type="button" class="btn btn-sm btn-outline-light dropdown-toggle" data-toggle="dropdown" aria-label="Seleccionar moneda">
                            <i class="fas fa-dollar-sign mr-1"></i> MXN
                        </button>
                        <div class="dropdown-menu dropdown-menu-right bg-dark">
                            <button class="dropdown-item text-white bg-dark" type="button" aria-label="Seleccionar MXN - Peso Mexicano">MXN - Peso Mexicano</button>
                            <button class="dropdown-item text-white bg-dark" type="button" aria-label="Seleccionar USD - Dólar Americano">USD - Dólar Americano</button>
                        </div>
                    </div>

                    <!-- Menú de cuenta -->
                    <div class="btn-group">
                        <button type="button" class="btn btn-sm btn-outline-light dropdown-toggle" data-toggle="dropdown" aria-label="Opciones de cuenta">
                            <i class="fas fa-user mr-1"></i> Mi Cuenta
                        </button>
                        <div class="dropdown-menu dropdown-menu-right bg-dark">
                            <button class="dropdown-item text-white bg-dark" type="button"><i class="fas fa-sign-in-alt mr-1"></i> Iniciar Sesión</button>
                            <button class="dropdown-item text-white bg-dark" type="button"><i class="fas fa-user-plus mr-1"></i> Registrarse</button>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item text-white bg-dark" type="button"><i class="fas fa-clipboard-list mr-1"></i> Mis Pedidos</button>
                        </div>
                    </div>

                    <!-- Iconos móviles -->
                    <div class="d-inline-flex align-items-center d-block d-lg-none ml-3">
                        <a href="#" class="btn px-0 text-white">
                            <i class="fas fa-heart"></i>
                            <span class="badge text-dark border border-light rounded-circle" style="padding-bottom: 2px;">0</span>
                        </a>
                        <a href="cart.html" class="btn px-0 ml-2 text-white position-relative">
                            <i class="fas fa-shopping-cart"></i>
                            <span id="mobile-cart-counter" class="badge text-dark border border-light rounded-circle" style="padding-bottom: 2px;">0</span>
                        </a>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


    <!-- Segunda fila: Logo, búsqueda y contacto -->
    <div class="row align-items-center bg-primary py-3 px-xl-5">
        <div class="col-lg-3">
            <a href="index.html" class="text-decoration-none">
                <span class="h1 text-uppercase text-white bg-dark px-2">Ferra</span>
                <span class="h1 text-uppercase text-dark bg-white px-2 ml-n1">Tools</span>
            </a>
        </div>

        <div class="col-lg-6 col-6 text-center">
            <form action="shop.html" method="get">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Buscar productos..." aria-label="Buscar productos">
                    <div class="input-group-append">
                        <button class="btn btn-dark" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <div class="col-lg-3 col-6 text-right">
            <div class="d-inline-flex align-items-center">
                <div class="mr-3">
                    <i class="fas fa-phone-alt fa-2x text-white"></i>
                </div>
                <div class="text-right">
                    <p class="m-0 text-white">Servicio al cliente</p>
                    <h5 class="m-0 text-white">
                        <a href="tel:+525512345678" class="text-white">+52 1 729 490 5257</a>
                    </h5>
                </div>
            </div>
        </div>
    </div>


    <!-- Navbar Start -->
    <div class="container-fluid bg-dark mb-30">
        <div class="row px-xl-5">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3 py-lg-0 px-0">
                    <a href="index.html" class="text-decoration-none d-block d-lg-none">
                        <span class="h1 text-uppercase text-dark bg-light px-2">Ferra</span>
                        <span class="h1 text-uppercase text-light bg-primary px-2 ml-n1">Tools</span>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                        <div class="navbar-nav mr-auto py-0">
                            <a href="index.html" class="nav-item nav-link">Inicio</a>
                            <a href="shop.html" class="nav-item nav-link">Tienda</a>
                            <a href="herramientas.html" class="nav-item nav-link">Herramientas</a>
                            <a href="materialeléctrico.html" class="nav-item nav-link">Material Eléctrico</a>
                            <a href="ferretería.html" class="nav-item nav-link">Ferretería</a>
                            <a href="bañosplomeria.html" class="nav-item nav-link">Baños y Plomería</a>
                            <a href="maquinaria.html" class="nav-item nav-link">Maquinaria Ligera</a>
                            <a href="seguridad.html" class="nav-item nav-link">Seguridad</a>
                            <a href="agricola.html" class="nav-item nav-link">Agrícola</a>

                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Páginas <i class="fa fa-angle-down mt-1"></i></a>
                                <div class="dropdown-menu bg-primary rounded-0 border-0 m-0">
                                    <a href="cart.html" class="dropdown-item">Carro de compras</a>
                                </div>
                            </div>
                        </div>
                        <div class="navbar-nav ml-auto py-0 d-none d-lg-flex">
                            <a href="#" class="btn px-0">
                                <i class="fas fa-heart text-primary"></i>
                                <span class="badge text-secondary border border-secondary rounded-circle" style="padding-bottom: 2px;">0</span>
                            </a>
                            <a href="cart.html" class="btn px-0 ml-3 position-relative">
                                <i class="fas fa-shopping-cart text-primary"></i>
                                <span id="cart-counter" class="badge">0</span>
                            </a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>

  

    <!-- Cart Start -->
    <div class="container-fluid">
        <div class="row px-xl-5">
            <div class="col-lg-8 table-responsive mb-5">
                <table class="table table-light table-borderless table-hover text-center mb-0">
                    <thead class="thead-dark">
                        <tr>
                            <th>Producto</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                            <th>Total</th>
                            <th>Eliminar</th>
                        </tr>
                    </thead>
                    <tbody class="align-middle" id="cart-items">
                        <!-- Los productos del carrito se cargarán aquí dinámicamente -->
                    </tbody>
                </table>
                <div id="empty-cart-message" class="empty-cart" style="display: none;">
                    <i class="fas fa-shopping-cart"></i>
                    <h3>Tu carrito está vacío</h3>
                    <p>No has agregado ningún producto a tu carrito todavía.</p>
                    <a href="shop.html" class="btn btn-primary">Ir a la tienda</a>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card border-secondary mb-5">
                    <div class="card-header bg-dark border-0 text-white">
                        <h4 class="font-weight-semi-bold m-0">Resumen del Carrito</h4>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between mb-3 pt-1">
                            <h6 class="font-weight-medium">Subtotal</h6>
                            <h6 class="font-weight-medium" id="subtotal">$0.00 MXN</h6>
                        </div>
                        <div class="d-flex justify-content-between">
                            <h6 class="font-weight-medium">Envío</h6>
                            <h6 class="font-weight-medium" id="shipping">$0.00 MXN</h6>
                        </div>
                    </div>
                    <div class="card-footer border-secondary bg-transparent">
                        <div class="d-flex justify-content-between mt-2">
                            <h5 class="font-weight-bold">Total</h5>
                            <h5 class="font-weight-bold" id="total">$0.00 MXN</h5>
                        </div>
                        <a href="checkout.html" class="btn btn-block btn-primary font-weight-bold my-3 py-3" id="checkout-btn">Proceder al Pago</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Cart End -->

    <!-- Footer Start -->
    <footer class="container-fluid bg-dark text-secondary mt-5 pt-5">
        <div class="row px-xl-5 pt-5">
          <div class="col-lg-4 col-md-12 mb-5 pr-3 pr-xl-5">
            <h5 class="text-secondary text-uppercase mb-4">Contáctanos</h5>
            <p class="mb-4">Estamos aquí para ayudarte. No dudes en contactarnos.</p>
            <ul class="list-unstyled">
              <li><i class="fa fa-map-marker-alt text-primary mr-3"></i>Lerma, Santa Maria  Atarrasquillo</li>
              <li><i class="fa fa-envelope text-primary mr-3"></i><a href="mailto:info@example.com">info@example.com</a></li>
              <li><i class="fa fa-phone-alt text-primary mr-3"></i>+52 729 490 5257</li>
            </ul>
          </div>
          <div class="col-lg-8 col-md-12">
            <div class="row">
              <div class="col-md-4 mb-5">
                <h5 class="text-secondary text-uppercase mb-4">Enlaces rápidos</h5>
                <ul class="list-unstyled">
                  <li><a class="text-secondary" href="index.html"><i class="fa fa-angle-right mr-2"></i>Inicio</a></li>
                  <li><a class="text-secondary" href="shop.html"><i class="fa fa-angle-right mr-2"></i>Nuestra tienda</a></li>
                  <li><a class="text-secondary" href="cart.html"><i class="fa fa-angle-right mr-2"></i>Carrito de compras</a></li>
                  <li><a class="text-secondary" href="contact.html"><i class="fa fa-angle-right mr-2"></i>Contáctanos</a></li>
                  <li><a class="text-secondary" href="herramientas.html"><i class="fa fa-angle-right mr-2"></i>Herramientas</a></li>
                  <li><a class="text-secondary" href="materialelectrico.html"><i class="fa fa-angle-right mr-2"></i>Material Eléctrico</a></li>
                  <li><a class="text-secondary" href="ferreteria.html"><i class="fa fa-angle-right mr-2"></i>Ferretería</a></li>
                  <li><a class="text-secondary" href="bañosplomeria.html"><i class="fa fa-angle-right mr-2"></i>Baños y Plomería</a></li>
                  <li><a class="text-secondary" href="maquinaria.html"><i class="fa fa-angle-right mr-2"></i>Maquinaria Ligera</a></li>
                  <li><a class="text-secondary" href="seguridad.html"><i class="fa fa-angle-right mr-2"></i>Seguridad</a></li>
                  <li><a class="text-secondary" href="agricola.html"><i class="fa fa-angle-right mr-2"></i>Agrícola</a></li>
                </ul>
                </ul>
              </div>
              <div class="col-md-4 mb-5">
                <h5 class="text-secondary text-uppercase mb-4">Boletín informativo</h5>
                <p>Suscríbete a nuestro boletín para recibir noticias y promociones.</p>
                <form action="" class="form-inline">
                  <div class="input-group">
                    <input type="email" class="form-control" placeholder="Tu dirección de correo electrónico">
                    <div class="input-group-append">
                      <button class="btn btn-primary">Suscribirse</button>
                    </div>
                  </div>
                </form>
                <h6 class="text-secondary text-uppercase mt-4 mb-3">Síguenos</h6>
                <div class="d-flex">
                  <a class="btn btn-primary btn-square mr-2" href="#"><i class="fab fa-facebook-f"></i></a>
                  <a class="btn btn-primary btn-square" href="#"><i class="fab fa-instagram"></i></a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4 mb-5">
            <h6 class="text-secondary text-uppercase mt-4 mb-3">Síguenos</h6>
            <div class="d-flex">
                <a class="btn btn-primary btn-square mr-2" href="#"><i class="fab fa-facebook-f"></i></a>
                <a class="btn btn-primary btn-square" href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        <!-- ... -->
        <div class="row border-top mx-xl-5 py-4" style="border-color: rgba(256, 256, 256, .1) !important;">
            <div class="col-md-6 px-xl-0">
                <p class="mb-md-0 text-center text-md-left text-secondary">
                    &copy; <a class="text-primary" href="#">FerraTools</a>. Todos los derechos reservados.
                </p>
            </div>
            <div class="col-md-6 px-xl-0 text-center text-md-right">
                <img class="img-fluid" src="img/th.jpeg" alt="Métodos de pago">
            </div>
        </div>
    </footer>
    <!-- Footer End -->

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script>
        // Función para formatear números como moneda
        function formatCurrency(amount) {
            return '$' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,') + ' MXN';
        }

        // Función para actualizar el contador del carrito
        function actualizarContadorCarrito() {
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            const totalItems = carrito.reduce((total, producto) => total + producto.cantidad, 0);
            document.getElementById('cart-counter').textContent = totalItems;
            document.getElementById('mobile-cart-counter').textContent = totalItems;
        }

        // Función para renderizar el carrito
        function renderCart() {
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            const cartItemsContainer = document.getElementById('cart-items');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            if (carrito.length === 0) {
                cartItemsContainer.innerHTML = '';
                emptyCartMessage.style.display = 'block';
                checkoutBtn.style.display = 'none';
                document.getElementById('subtotal').textContent = formatCurrency(0);
                document.getElementById('shipping').textContent = formatCurrency(0);
                document.getElementById('total').textContent = formatCurrency(0);
                return;
            } else {
                emptyCartMessage.style.display = 'none';
                checkoutBtn.style.display = 'block';
            }
            
            let subtotal = 0;
            let html = '';
            
            carrito.forEach((producto, index) => {
                const totalProducto = producto.precio * producto.cantidad;
                subtotal += totalProducto;
                
                html += `
                    <tr>
                        <td class="align-middle">
                            <img src="${producto.imagen}" alt="${producto.nombre}" class="product-img mr-2">
                            ${producto.nombre}
                        </td>
                        <td class="align-middle">${formatCurrency(producto.precio)}</td>
                        <td class="align-middle">
                            <div class="input-group quantity mx-auto" style="width: 100px;">
                                <div class="input-group-prepend">
                                    <button class="btn btn-sm btn-primary btn-minus" data-index="${index}">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                </div>
                                <input type="text" class="form-control form-control-sm bg-secondary border-0 text-center" value="${producto.cantidad}" id="quantity-${index}">
                                <div class="input-group-append">
                                    <button class="btn btn-sm btn-primary btn-plus" data-index="${index}">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </td>
                        <td class="align-middle">${formatCurrency(totalProducto)}</td>
                        <td class="align-middle">
                            <button class="btn btn-sm btn-danger remove-item" data-index="${index}">
                                <i class="fa fa-times"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            cartItemsContainer.innerHTML = html;
            
            // Calcular envío (ejemplo: 10% del subtotal con mínimo $100 y máximo $500)
            const shipping = Math.min(Math.max(subtotal * 0.1, 100), 500);
            const total = subtotal + shipping;
            
            document.getElementById('subtotal').textContent = formatCurrency(subtotal);
            document.getElementById('shipping').textContent = formatCurrency(shipping);
            document.getElementById('total').textContent = formatCurrency(total);
            
            // Agregar eventos a los botones
            document.querySelectorAll('.btn-minus').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = e.target.closest('button').dataset.index;
                    updateQuantity(index, -1);
                });
            });
            
            document.querySelectorAll('.btn-plus').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = e.target.closest('button').dataset.index;
                    updateQuantity(index, 1);
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = e.target.closest('button').dataset.index;
                    removeItem(index);
                });
            });
            
            document.querySelectorAll('input[id^="quantity-"]').forEach(input => {
                input.addEventListener('change', (e) => {
                    const index = e.target.id.split('-')[1];
                    const newQuantity = parseInt(e.target.value);
                    if (newQuantity > 0) {
                        updateQuantityDirect(index, newQuantity);
                    } else {
                        e.target.value = 1;
                    }
                });
            });
        }
        
        // Función para actualizar cantidad
        function updateQuantity(index, change) {
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            const newQuantity = carrito[index].cantidad + change;
            
            if (newQuantity < 1) {
                removeItem(index);
                return;
            }
            
            carrito[index].cantidad = newQuantity;
            localStorage.setItem('carrito', JSON.stringify(carrito));
            renderCart();
            actualizarContadorCarrito();
        }
        
        // Función para actualizar cantidad directamente
        function updateQuantityDirect(index, newQuantity) {
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito[index].cantidad = newQuantity;
            localStorage.setItem('carrito', JSON.stringify(carrito));
            renderCart();
            actualizarContadorCarrito();
        }
        
        // Función para eliminar un item
        function removeItem(index) {
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            carrito.splice(index, 1);
            localStorage.setItem('carrito', JSON.stringify(carrito));
            renderCart();
            actualizarContadorCarrito();
        }
        
        // Inicializar el carrito al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            actualizarContadorCarrito();
            renderCart();
        });
    </script>
</body>
</html>